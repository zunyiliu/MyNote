# TCP 连接建立
## TCP 三次握手过程是怎样的？
流程图如下，包含三个报文：
- SYN
- SYN + ACK
- ACK+数据（ACK的同时已经可以携带数据了）
![[Pasted image 20240129112350.png]]

## 为什么是三次握手？不是两次、四次？
三次握手的原因：
- 三次握手才可以阻止重复历史连接的初始化（主要原因）
- 三次握手才可以同步双方的初始序列号
- 三次握手才可以避免资源浪费

### 原因一：避免历史连接
我们先看为什么两次握手无法避免历史连接：
1. 在两次握手的情况下，服务端在收到 SYN 报文后，就进入 ESTABLISHED 状态，意味着这时可以给对方发送数据，但是客户端此时还没有进入 ESTABLISHED 状态
2. 