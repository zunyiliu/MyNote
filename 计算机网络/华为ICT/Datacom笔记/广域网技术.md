# PPP协议
## 概述
- 广域网数据链路层协议
- 主要用于在全双工的链路上进行点到点 的数据传输封装
- 提供了PAP（Password Authentication Protocol，密码验证协议）和CHAP（Challenge Handshake Authentication Protocol，挑战握手认证协议）
- 提供LCP（Link Control Protocol，链路控制协议），用于各种链路层参数的协商
- 提供各种NCP（Network Control Protocol，网络控制协议），如IPCP（IP Control Protocol ，IP控制协议），用于 各网络层参数的协商

## PPP链路建立流程
- 链路层协商
- 认证协商（可选）
- 网络层协商

## 链路层协商
- 正常协商：如果对端接收此报文且参数匹配， 则通过回复Configure-Ack响应协商成功
- 参数不匹配：接收方回复Configure-Nak响应告知对端修改参数然后重新协商
- 参数不识别：接收方回复Configure-Reject响应告知对端删除不识别的参数然后重新协商

## 认证协商
- PAP认证双方有两次握手。协商报文以明文的形式在链路上传输
- CHAP认证双方有三次握手。协商报文被加密后再在链路上传输

# PPPoE
## 概述
- 既有以太网的组网灵活优势，又可以利用PPP协议实现认证、计费等功能
- 常见应用场景有家庭用户拨号上网、企业用户拨号上网等
- 会话建立有三个阶段，PPPoE发现阶段、PPPoE会话阶段和PPPoE终结阶段
![[Pasted image 20231107100114.png]]

## PPPoE发现阶段
PPPoE协议发现有四个步骤：客户端发送请求、服务端响应请求、客户端确认响应和建立会话

## PPPoE会话阶段
PPPoE会话阶段会进行PPP协商，分为LCP协商、认证协商、NCP协商三个阶段

## PPPoE终结阶段
PPPoE客户端希望关闭连接时，会向PPPoE服务器端发送一个PADT报文，用于关闭连接

# 广域网技术发展
## 传统IP路由转发
![[Pasted image 20231107100443.png]]

## MPLS标签转发
![[Pasted image 20231107100457.png]]

## SR转发
![[Pasted image 20231107100641.png]]
![[Pasted image 20231107100700.png]]

