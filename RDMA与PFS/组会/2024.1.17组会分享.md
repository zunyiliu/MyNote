# Memory Region
RDMA从内存中取出数据时不会经过CPU，然而在用户空间中的数据地址都是虚拟地址，经过MMU的转换才能得到真实的物理地址。

一方面RDMA需要有一个虚拟地址到物理地址的映射表，这样才能正确转换地址。另一方面RDMA需要防止用户程序恶意指定的虚拟地址，从而访问不该访问的内存。基于这两个原因，RDMA提出了Memory Region的概念。

MR包含以下功能：
1. 注册MR时，创建一个VA to PA的映射表。
2. 注册MR时，创建两把钥匙——L_KEY（Local Key）和R_KEY（Remote Key），用于权限保护。
3. 注册MR时，pin住数据页，防止数据页被操作系统的page cache所替换，进而导致VA to PA的关系变化

# Protection Domain
由于MR和QP之间没有绑定关系，理论上本端QP和远端QP建立连接后，就可以通过猜测VA和R_KEY的方式访问任意一块远端MR，显然这是不安全的。

为解决这个问题，RDMA在本端设置PD，用于捆绑QP和MR，只有在QP访问的MR同属于一个PD时，才能正确访问。

# Queue Pair
通信的基本单位，可以类比于传统网络中的Socket，包含多个通信状态。

# Completion Queue
硬件通过CQ中的CQE/WC来告诉软件某个WQE/WR的完成情况。

根据服务类型的不同，生成CQE的时间也不同。

每个WQ都必须关联一个CQ，而每个CQ可以关联多个SQ和RQ：
- 同一个WQ中的WQE，其对应的CQE间是保序的
- 不同WQ中的WQE，其对应的CQE间是不保序的
- CQE通过指明WQE的编号关联WQE

# 